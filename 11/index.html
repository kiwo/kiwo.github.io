<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <meta name="description" content="Software development using .NET, C#, SQL, Javascript and related technologies" />

    <title>Mikhail Shilkov</title>
    <meta name="author" content="Mikhail Shilkov">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/feed/" rel="alternate" title="mikhail.io" type="application/atom+xml">
    <link href="/favicon.ico?v=2" rel="shortcut icon">

    <!-- Bootstrap -->
    <link href="/styles/site.css" rel="stylesheet" media="screen">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/scripts/vendor/html5shiv.js"></script>
    <script src="/scripts/vendor/respond.min.js"></script>
    <![endif]-->

    <meta name="generator" content="DocPad v6.78.4" />
    
</head>
<body>

<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <span class="text-primary">Mikhail Shilkov</span><br />
                <span class="elevator-pitch">F#, C#, JS, SQL, Azure programmer</span>
            </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <!--<li><a href="/">Blog</a></li>-->
                
                    <li><a href="/tags">Topics</a></li>
                
                    <li><a href="/archives">Archives</a></li>
                
                    <li><a href="/about">About</a></li>
                
                <li class="hidden-xs">
                    <a href="/feed/" class="rss"><span class="icon icon-feed"></span></a>
                    <a href="https://www.linkedin.com/in/mikhailshilkov" class="linkedin"><span class="icon icon-linkedin"></span></a>
                    <a href="http://twitter.com/mikhailshilkov" class="twitter"><span class="icon icon-twitter"></span></a>
                    <a href="https://github.com/mikhailshilkov" class="github"><span class="icon icon-github"></span></a>
                </li>
            </ul>
            <form class="navbar-form navbar-right hidden-xs" role="search" action="http://google.com/search"
                  method="get">
                <div class="form-group">
                    <input type="search" name="q" class="form-control" placeholder="Search">
                    <input type="hidden" name="q" value="site:mikhail.io">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="container">
    
    <article class="post">
    <div class="post-date">Apr 10th, 2012</div>
    
    <h1><a href='/2012/04/10/google-transit-api-research'>Google Transit API research</a></h1>
    
    <div class="post-content">
        <p>Recently, Google has launch a Transit service for the biggest cities of Russia: a service to caculate routes with public transport options. As a part of RnD for upcoming project, I need to understand whether there&#39;s any feasible way to calculate public transport route programmatically. I.e. I need Google Transit API.</p>
<p>Here&#39;s what I&#39;ve got so far:</p>
<ol>
<li><p>There&#39;s no official Google Transit API at the momemnt. Transit feeds are provided by third party agencies, and most of those feeds are not public. So, Google is not allowed to open them as API.</p>
</li>
<li><p>You may try to consume the &quot;unofficial&quot; API using the following sample link:
<a href="http://maps.google.com/?saddr=St.%20Petersburg%20Shavrova%2013&amp;daddr=St.%20Petersburg%20Sadovaya%2032&amp;dirflg=r&amp;output=json" title="Sample Google Transit JSON result">http://maps.google.com/?saddr=St.%20Petersburg%20Shavrova%2015&amp;daddr=St.%20Petersburg%20Sadovaya%2030&amp;dirflg=r&amp;output=json</a></p>
</li>
<li><p>However, the result won&#39;t be a valid JSON. Instead, that&#39;s something, that can be easily converted to a JavaScript object. (The differences are: there is no quotes around property names, the strings are not properly encoded etc.)</p>
</li>
<li><p>Imagine you got this JavaScript object. However, it won&#39;t allow you to easily get the structured route details. Object&#39;s properties contain the route points coordinates, but no descriptions. The only place where the descriptions may be found is &#39;panel&#39; property, which contains a chunk of HTML text (sample <a href="https://skydrive.live.com/redir.aspx?cid=c010011792a4b538&amp;resid=C010011792A4B538!129&amp;parid=C010011792A4B538!124&amp;authkey=!AEzvBnLErMyVDbo" title="Sample HTML of ">here</a>).</p>
</li>
<li><p>So, you&#39;ll have to convert this HTML into XML (X-HTML) and then build the parser of this XML to get the essence data of a trip.</p>
</li>
</ol>
<p>Seems like a bit of overkill to me. Having in mind, that &quot;unofficial&quot; API may change in the future, including slight changes in &#39;panel&#39; HTML structure that will kill your parser.</p>
<p>Also, I&#39;m still not sure whether I can change the language of route directions.</p>
<p><strong>Update</strong>: language is specified with &quot;hl&quot; request parameter.</p>
<p><strong>Update 2</strong>: <a href="http://mikhail.io/2012/08/14/google-adds-public-transit-into-api/">Google Transit API is now available</a>!</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/api/'>API</a>, <a href='/tags/google-maps/'>Google Maps</a>, <a href='/tags/google-transit/'>Google Transit</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Mar 13th, 2012</div>
    
    <h1><a href='/2012/03/13/multi-level-teleriks-tileview'>Multi-level telerik's TileView</a></h1>
    
    <div class="post-content">
        <p>We were investigating the options for visual representation of hierarchical dashboard in our Silverlight application. This means, we want to display the number of gauges with tree-like structure. Here is a sample:</p>
<pre class="highlight"><code class="hljs haml">Dashboard
-<span class="ruby">-- <span class="hljs-constant">Fuel</span> economy index
</span>-<span class="ruby">----- <span class="hljs-constant">Preventative</span> driving
</span>-<span class="ruby">-------- <span class="hljs-constant">Accelaration</span> style
</span>-<span class="ruby">-------- <span class="hljs-constant">Braking</span> frequency
</span>-<span class="ruby">-------- <span class="hljs-constant">Stop</span> approach
</span>-<span class="ruby">----- <span class="hljs-constant">Gear</span> shifting index
</span>-<span class="ruby">-------- ...
</span>-<span class="ruby">-- <span class="hljs-constant">Degree</span> of difficulty
</span>-<span class="ruby">----- ...
</span>-<span class="ruby">-- <span class="hljs-constant">Events</span>
</span>-<span class="ruby">----- ......
</span></code></pre><p>One of the options was to use <a href="http://www.telerik.com/products/silverlight/controls/tileview.aspx" title="Telerik">Telerik&#39;s TileView control</a>. It doesn&#39;t support hierachies out of the box, but we&#39;ve made a prototype control, which proves that the task is doable. Here is how nested TileView&#39;s look like:
<img src="/2012/03/13/multi-level-teleriks-tileview/tileview.png" alt="Tile view" title="Tile view"></p>
<p>Everything works with templates and data binding, no dirty tricks needed. You can download the sample project with multi-level TileView&#39;s from <a href="https://skydrive.live.com/redir.aspx?cid=c010011792a4b538&amp;resid=C010011792A4B538!128&amp;parid=root" title="Multi-level TileView sample project">here</a>.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/c#/'>C#</a>, <a href='/tags/silverlight/'>Silverlight</a>, <a href='/tags/telerik/'>Telerik</a>, <a href='/tags/tileview/'>TileView</a>, <a href='/tags/user-control/'>User Control</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Mar 1st, 2012</div>
    
    <h1><a href='/2012/03/01/books-that-ive-recently-read'>Books that I've recently read</a></h1>
    
    <div class="post-content">
        <p><img src="/2012/03/01/books-that-ive-recently-read/stevejobsbook2.jpg" alt="Steve Jobs book" title="Steve Jobs book">
<strong>&quot;Steve Jobs&quot; </strong>by Walter Isaacson (<a href="http://www.amazon.com/Steve-Jobs-Walter-Isaacson/dp/1451648537" title="Steve Jobs on Amazon">link</a>)</p>
<p>I guess it&#39;s one of the most popular books in the world at the moment. The story of the most influential person in IT world ever, that reveals the intense personality and extraordinary talent.</p>
<p>I never used a single product of Apple company, but still I&#39;m very impressed with what Steve did and with the way how he did that. Now I understand that many things are possible, even if everyone <em>knows</em> they are not.</p>
<p>The book is pretty long and detailed, but it&#39;s worth the time. I rate it 4 out of 5.</p>
<p><img src="/2012/03/01/books-that-ive-recently-read/tinkov1.jpg" alt="Tinkov" title="Tinkov"> <strong>&quot;How to Become a Businessman&quot;</strong> by Oleg Tinkov (<a href="http://tinkov.com/payment/5/" title="Tinkov books">link</a>)</p>
<p>A book by the most famous Russian entrepreneur. Short, simple and sharp, it gives a portion of good advice for young businessmen.</p>
<p>To me it appeared to be really motivating. The main idea is &quot;keep your head clean and your work hard - and you&#39;ll earn your million&quot;.</p>
<p>The book is quite short (you&#39;ll probably finish it in one or two nights) and well structured (how to find the idea, make the brand, start, develop and sell the business) with real life example.</p>
<p>5 star reading for a rookie businessman in Russia.</p>
<p><img src="/2012/03/01/books-that-ive-recently-read/tinkov2.jpg" alt="Tinkov 2" title="Tinkov">
<strong>&quot;I&#39;m Just Like Anyone Else&quot;</strong> by Oleg Tinkov (<a href="http://itunes.apple.com/us/book/im-just-like-anyone-else/id407756421" title="Oleg Tinkov">link</a>)</p>
<p>Another book of same author. He didn&#39;t mean to teach the reader, but instead he tells the story of his life and all of his businesses to the moment.</p>
<p>The biography of strong entrepreneur and charismatic leader is definitely worth reading. And while doing that, you&#39;ll probably learn some hints and ideas on business in Russia.</p>
<p>Rating is 4*.</p>
<p><strong>
<img src="/2012/03/01/books-that-ive-recently-read/the_art_of_the_start.jpg" alt="" title="the_art_of_the_start">&quot;The Art of  the Start&quot;</strong> by Guy Kawasaki (<a href="http://www.guykawasaki.com/the-art-of-the-start/" title="Guy Kawasaki">link</a>)</p>
<p>Guy is a former evangelist for Apple&#39;s Macintosh computer and now - a Silicon Valley venture capitalist.</p>
<p>While he gives some generic valuable hints on start-up business, the book did not seem the right one for me at the moment. The author goes into great detail when it comes to raising capital, preparing awesome presentations and self-marketing.</p>
<p>You know, I don&#39;t expect myself to form the board of directors any soon... So I&#39;ll give this book 3*, as it&#39;s good but not relevant enough for my needs.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/books/'>Books</a>, <a href='/tags/business-books/'>Business books</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Feb 28th, 2012</div>
    
    <h1><a href='/2012/02/28/gauge-control-with-two-values-silverlight'>Gauge control with two values (Silverlight)</a></h1>
    
    <div class="post-content">
        <p>While developing the dashboard to display several performance indexes, I bumped into the task of visualizing the pair of numbers on a single gauge. One number would show a person&#39;s performance metric, while the other one would display the person group&#39;s performance indicator to compare with. I couldn&#39;t find a ready control to use, so I decided to design my own.</p>
<p>I took the look idea from <a href="http://www.fusioncharts.com/demos/gallery/gauges/chart.asp?id=linear_1" title="Fusion Chart gauge sample">Fusion Charts</a> flash controls (highly recommended), which I was using a couple of years ago:
<img src="/2012/02/28/gauge-control-with-two-values-silverlight/fusiongauge.png" alt="" title="FusionGauge"></p>
<p>I needed the same thing, but with two values displayed at the same time. Requirements are pretty simple:</p>
<ul>
<li>Three colored zones (low-red / average-yellow / high-green) with configurable thresholds</li>
<li>Configurable min and max values</li>
<li>One value marker on top of the gauge and another one on the bottom</li>
<li>Bubble with exact value next to each marker</li>
<li>All control properties are ready to be data-bound</li>
<li>Flexible size</li>
<li>No ticks needed
Here is what I ended up with:
<img src="/2012/02/28/gauge-control-with-two-values-silverlight/mygauge.png" alt="" title="MyGauge"></li>
</ul>
<p>Quite minimalistic and sexy ;-)  The control usage is self-explanatory:</p>
<pre class="highlight"><code class="hljs nix">&lt;local:Gauge x:<span class="hljs-variable">Name=</span><span class="hljs-string">"Gauge"</span> <span class="hljs-variable">Value=</span><span class="hljs-string">"71"</span> <span class="hljs-variable">SecondValue=</span><span class="hljs-string">"84"</span> <span class="hljs-variable">RedThreshold=</span><span class="hljs-string">"60"</span> <span class="hljs-variable">YellowThreshold=</span><span class="hljs-string">"80"</span>
                 <span class="hljs-variable">MinValue=</span><span class="hljs-string">"0"</span> <span class="hljs-variable">MaxValue=</span><span class="hljs-string">"100"</span> <span class="hljs-variable">Width=</span><span class="hljs-string">"400"</span> /&gt;
</code></pre><p>Source code has no rocket-science inside, so I won&#39;t post it here. You can download the Gauge control test application <a href="https://skydrive.live.com/redir.aspx?cid=c010011792a4b538&amp;resid=C010011792A4B538!127&amp;parid=root">here</a>.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/gauge-control/'>gauge control</a>, <a href='/tags/silverlight/'>Silverlight</a>, <a href='/tags/user-control/'>User Control</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Feb 5th, 2012</div>
    
    <h1><a href='/2012/02/05/hunting-memory-leaks-in-silverlight'>Hunting memory leaks in Silverlight</a></h1>
    
    <div class="post-content">
        <p>Recently, I&#39;ve spent a couple of days seeking and fixing memory leaks in our Silverlight application. It might be tough sometimes, but it&#39;s a good &#39;brain-teasing&#39; practice and it&#39;s a good way to learn how inner things work.</p>
<p>Memory leaks in Silverlight applications may be found with WinDbg tool. Have a look here for a quick introduction:
<a href="http://davybrion.com/blog/2009/08/finding-memory-leaks-in-silverlight-with-windbg/">http://davybrion.com/blog/2009/08/finding-memory-leaks-in-silverlight-with-windbg/</a></p>
<p>Basically, I only use 4 commands in WinDbg. First, I enable debugging Silverlight 5 applications:</p>
<pre class="highlight"><code class="hljs livescript">!load <span class="hljs-attribute">C</span>:<span class="hljs-string">\Program</span> Files (x86)<span class="hljs-string">\Microsoft</span> Silverlight<span class="hljs-string">\5.0.61118.0\sos.dll</span>
</code></pre><p>Then, I get the amount of instances for class names matching the search pattern:</p>
<pre class="highlight"><code class="hljs fsharp">!dumpheap -stat -<span class="hljs-class"><span class="hljs-keyword">type</span> &lt;type name&gt;</span>
</code></pre><p>Next, I use the result to locate class instances&#39; addresses:</p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-prompt">!dumpheap -MT &lt;MT from previous&gt;</span>
</code></pre><p>Finally, I get the reference chain for each of address found:</p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-prompt">!gcroot &lt;address&gt;</span>
</code></pre><p>Having done this, you&#39;ll have to turn your brain on and try to figure out whether you found a memory leak and why if yes, why it takes place. Here are several examples of memory leaks that I found during last session:</p>
<ol>
<li>HtmlPage.Document.AttachEvent() call, which was never detached. We were using some browser-level API to subscribe on HTML document events, and never cared about unsubscribing. I got it refactored to native Silverlight event handlers, and this solved the issue.</li>
<li>Deriving from MultiScaleTileSource. We used to have several classes for map layer rendering, inherited from MultiScaleTileSource. If an instance of such class is never used for map rendering (no assignment to MultiScaleImage.Source), then the GC never collects it (together with everything it references, of course). Another portion of refactoring helped: do not derive from MultiScaleTileSource whenever it&#39;s not needed for MultiScaleImage population. Sounds trivial, right? But it helps a lot.</li>
<li>Improper usage of CompositionTarget.Rendering event. For our custom animated Progress control, we used to subscribe to CompositionTarget.Rendering in control constructor, and then animated the progress in event handler. As the Progress control used to be a part of control tree (in Expanded/Collapsed state), the event was never unsubsribed, which means... ta-dam... a memory leak. Now I use CompositionTarget.Rendering more carefully: subscribe to it at the point when Progress control is shown, and unsubscribe immediately after it gets collapsed.</li>
<li>One of our major controls used to fail to unsubscribe itself from global error handler. There were a couple other similar event-related leaks. All fixed.</li>
<li><p>A weird Telerik-related leak. We actively use RadGridView control throughout our application, and we dynamically set HeaderCellStyle for some of the columns depending on grid configuration. Unexpectedly enough, this led to a memory leak with the following reference stack:</p>
<p> HandleTable:</p>
<pre class="highlight"><code class="hljs stylus"> <span class="hljs-number">02</span>f311f4 (pinned handle)
 -&gt; <span class="hljs-number">11</span>ee6210 System<span class="hljs-class">.Object</span>[]
 -&gt; <span class="hljs-number">10</span>f21690 OurNamespace<span class="hljs-class">.Utilities</span><span class="hljs-class">.AppletHelper</span>
 -&gt; <span class="hljs-number">10</span>f21670 System.EventHandler`<span class="hljs-number">1</span>[[OurNamespace<span class="hljs-class">.Utilities</span><span class="hljs-class">.EventArgs</span>`<span class="hljs-number">1</span>[[System<span class="hljs-class">.Exception</span>, mscorlib]], OurNamespace.Utilities]]
 -&gt; <span class="hljs-number">10</span>f2103c QFVClient<span class="hljs-class">.App</span>
 -&gt; <span class="hljs-number">1111</span>a9bc QFVClient<span class="hljs-class">.PageContainer</span>
 -&gt; <span class="hljs-number">11122138</span> System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11122184</span> System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">1188</span>ba6c System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.Grid</span>
 -&gt; <span class="hljs-number">1188</span>bad4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">118912</span>d8 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11122</span>dc8 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.Border</span>
 -&gt; <span class="hljs-number">11122</span>e30 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11122</span>e7c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11128</span>ea4 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.Grid</span>
 -&gt; <span class="hljs-number">11128</span>f0c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11128</span>f58 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11128</span>fa4 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.Border</span>
 -&gt; <span class="hljs-number">1112900</span>c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11129058</span> System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11132</span>e00 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.Grid</span>
 -&gt; <span class="hljs-number">11132</span>e68 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11135</span>bc4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11133758</span> QFVClient<span class="hljs-class">.Controls</span><span class="hljs-class">.SearchBox</span>
 -&gt; <span class="hljs-number">11133</span>ca8 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11133</span>cf4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11133</span>c40 System<span class="hljs-class">.Windows</span><span class="hljs-class">.ResourceDictionary</span>
 -&gt; <span class="hljs-number">11133</span>d30 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11133</span>d7c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11133</span>e18 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Style</span>
 -&gt; <span class="hljs-number">11133</span>e68 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">11133</span>eb4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">11133</span>ef0 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[System<span class="hljs-class">.UInt32</span>, mscorlib],[System<span class="hljs-class">.Windows</span><span class="hljs-class">.DependencyObject</span>, System.Windows]]
 -&gt; <span class="hljs-number">11133</span>f3c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[System<span class="hljs-class">.UInt32</span>, mscorlib],[System<span class="hljs-class">.Windows</span><span class="hljs-class">.DependencyObject</span>, System.Windows]][]
 -&gt; <span class="hljs-number">110</span>dced0 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Style</span>
 -&gt; <span class="hljs-number">110</span>dcf20 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">110</span>dcf6c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">110</span>dce6c System<span class="hljs-class">.Windows</span><span class="hljs-class">.SetterBaseCollection</span>
 -&gt; <span class="hljs-number">110</span>dcfa8 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">110</span>dcff4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">110</span>dcd0c System<span class="hljs-class">.Windows</span><span class="hljs-class">.Setter</span>
 -&gt; <span class="hljs-number">110</span>dcd5c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">110</span>dcda8 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">110</span>dcde4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[System<span class="hljs-class">.UInt32</span>, mscorlib],[System<span class="hljs-class">.Windows</span><span class="hljs-class">.DependencyObject</span>, System.Windows]]
 -&gt; <span class="hljs-number">110</span>dce30 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[System<span class="hljs-class">.UInt32</span>, mscorlib],[System<span class="hljs-class">.Windows</span><span class="hljs-class">.DependencyObject</span>, System.Windows]][]
 -&gt; <span class="hljs-number">110</span>dcad0 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Controls</span><span class="hljs-class">.ControlTemplate</span>
 -&gt; <span class="hljs-number">110</span>dcb34 System<span class="hljs-class">.Windows</span><span class="hljs-class">.ResourceDictionary</span>
 -&gt; <span class="hljs-number">110</span>dd0d8 MS<span class="hljs-class">.Internal</span><span class="hljs-class">.ResourceDictionaryCollection</span>
 -&gt; <span class="hljs-number">110</span>dd21c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">1111609</span>c System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">110</span>df418 System<span class="hljs-class">.Windows</span><span class="hljs-class">.ResourceDictionary</span>
 -&gt; <span class="hljs-number">110</span>df470 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]]
 -&gt; <span class="hljs-number">110</span>eb8b4 System<span class="hljs-class">.Collections</span><span class="hljs-class">.Generic</span><span class="hljs-class">.Dictionary</span>`<span class="hljs-number">2</span>+Entry[[MS<span class="hljs-class">.Internal</span><span class="hljs-class">.IManagedPeerBase</span>, System.Windows],[System<span class="hljs-class">.Object</span>, mscorlib]][]
 -&gt; <span class="hljs-number">110</span>ecde0 System<span class="hljs-class">.Windows</span><span class="hljs-class">.Style</span>
 -&gt; <span class="hljs-number">116</span>d1cd4 OurNamespace<span class="hljs-class">.Controls</span><span class="hljs-class">.TextColumn</span>
</code></pre></li>
</ol>
<p>PageContainer is the application container which always exists, while TextColumn is a custom column class for a Telerik grid, which is already removed from application tree at the time point. Our TextColumn gets bound with root controls through ResourceDictionary/Style chain; and I can&#39;t explain the reason of such a leak. Though, clearing HeaderCellStyle when grid is not needed anymore does fix the problem. Weird enough.</p>
<p>As you can see, there are numerous reasons for memory leaks in a Silverlight application. Some are obvious (e.g. global event handlers never unsubscribed), other ones are hard to understand intuitively and sometimes depend on runtime or third party internals. In any case, a way to fix or workaround always exists. Good luck with bug hunting!</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/c#/'>C#</a>, <a href='/tags/fixing-memory-leaks/'>fixing memory leaks</a>, <a href='/tags/memory-leaks/'>Memory leaks</a>, <a href='/tags/silverlight/'>Silverlight</a>, <a href='/tags/windbg/'>WinDbg</a>
    </div>
    
</article>


<div class="page-nav">
    
    <a class="page-nav-newer" href="/10"><span class="icon icon-arrow-left-2"></span> Next page</a>
    
    
    <a class="page-nav-older" href="/12">Previous page <span class="icon icon-arrow-right-2"></span></a>
    
</div>

<div id="me">
    <p itemscope itemtype="http://data-vocabulary.org/Person">
        <img src="/images/Headshot-Square.jpg" alt="Mikhail Shilkov" itemprop="photo" />
        I'm <b><span itemprop="name">Mikhail Shilkov</span></b>, a <span itemprop="title">software developer</span>. I enjoy F#, C#, Javascript and SQL development, reasoning about distributed systems, data processing pipelines, cloud and web apps. I blog about my experience on this website.
    </p>
    <p>
        <a href="https://www.linkedin.com/in/mikhailshilkov/">LinkedIn</a> &#8226;
        <a href="http://twitter.com/mikhailshilkov">@mikhailshilkov</a> &#8226;
        <a href="https://github.com/mikhailshilkov">GitHub</a> &#8226;
        <a href="http://stackoverflow.com/users/1171619/mikhail">Stack Overflow</a>
    </p>
</div>

</div>
<div class="container">
    <div class="navbar navbar-footer">
        <p class="navbar-center navbar-text">Content copyright &copy; 2017 Mikhail Shilkov</p>
    </div>
</div>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
<script src="/vendor/highlight.pack.js"></script>
<script src="/site.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59218480-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>