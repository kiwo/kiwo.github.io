<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <meta name="description" content="Software development using .NET, C#, SQL, Javascript and related technologies" />

    <title>Mikhail Shilkov</title>
    <meta name="author" content="Mikhail Shilkov">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="twitter:card" content="summary_large_image"></meta>
    <meta name="twitter:creator" content="@MikhailShilkov"></meta>
    <meta name="twitter:title" content="Mikhail Shilkov"></meta>

    <meta property="og:type" content="article" />
    <meta property="og:title" content="Mikhail Shilkov" />
    <meta property="og:url" content="https://mikhail.io/16/index.html" />




    <link href="/feed/" rel="alternate" title="mikhail.io" type="application/atom+xml">
    <link href="/favicon.ico?v=2" rel="shortcut icon">

    <!-- Bootstrap -->
    <link href="/styles/site.css" rel="stylesheet" media="screen">
    <link href="/vendor/prism.css" rel="stylesheet" media="screen">

    <meta name="generator" content="DocPad v6.80.6" />
    
</head>
<body>

<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <span class="text-primary">Mikhail Shilkov</span><br />
                <span class="elevator-pitch">Serverless, Azure, FP, F# and more</span>
            </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <!--<li><a href="/">Blog</a></li>-->
                
                    <li><a href="/tags/">Topics</a></li>
                
                    <li><a href="/archives/">Archives</a></li>
                
                    <li><a href="/talks/">Talks</a></li>
                
                    <li><a href="/about/">About</a></li>
                
                <li class="hidden-xs">
                    <a href="/feed/" class="rss"><span class="icon icon-feed"></span></a>
                    <a href="https://www.linkedin.com/in/mikhailshilkov" class="linkedin"><span class="icon icon-linkedin"></span></a>
                    <a href="https://twitter.com/mikhailshilkov" class="twitter"><span class="icon icon-twitter"></span></a>
                    <a href="https://github.com/mikhailshilkov" class="github"><span class="icon icon-github"></span></a>
                </li>
            </ul>
            <form class="navbar-form navbar-right hidden-xs" role="search" action="https://google.com/search"
                  method="get">
                <div class="form-group">
                    <input type="search" name="q" class="form-control" placeholder="Search">
                    <input type="hidden" name="q" value="site:mikhail.io">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="container">
    
    <article class="post">
    <div class="post-date">Aug 14th, 2012</div>
    
    <h1><a href='/2012/08/14/google-adds-public-transit-into-api/'>Google adds Public Transit into API</a></h1>
    

    

    <div class="post-content">
        <p>Now, both Google Directions Web Services and Google Maps JavaScript API include building the routes with Public Transit.</p>
<p>Blog post:</p>
<p><a href="http://googlegeodevelopers.blogspot.com/2012/06/public-transit-routing-and-layer-now.html">http://googlegeodevelopers.blogspot.com/2012/06/public-transit-routing-and-layer-now.html</a></p>
<p>API docs:</p>
<p><a href="https://developers.google.com/maps/documentation/directions/#TravelModes">https://developers.google.com/maps/documentation/directions/#TravelModes</a></p>
<p><a href="https://developers.google.com/maps/documentation/javascript/directions#TransitOptions">https://developers.google.com/maps/documentation/javascript/directions#TransitOptions</a></p>
<p>Sample request in St. Petersburg:</p>
<p><a href="http://maps.googleapis.com/maps/api/directions/json?origin=59.94473,30.294254&amp;destination=59.80612,30.308552&amp;sensor=false&amp;departure_time=1346197500&amp;mode=transit">http://maps.googleapis.com/maps/api/directions/json?origin=59.94473,30.294254&amp;destination=59.80612,30.308552&amp;sensor=false&amp;departure_time=1346197500&amp;mode=transit</a></p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/google-maps/'>Google Maps</a>, <a href='/tags/google-transit/'>Google Transit</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Jul 26th, 2012</div>
    
    <h1><a href='/2012/07/26/enable-jinja2-and-i18n-translations-on-google-appengine/'>Enable jinja2 and i18n translations on Google AppEngine</a></h1>
    

    

    <div class="post-content">
        <p>My initial goal was to make our new application (based on python/AppEngine) translatable. This means the following requirements:</p>
<ol>
<li>All strings in the application must be translatable</li>
<li>Translations should preferably stored in separate files</li>
<li>It should be easy to use the translations both in .py files and html templates</li>
</ol>
<p>The solution that I came to after a couple of hours includes the following components: Babel (string file generation), i18n.gettext (getting strings in code) and jinja2 &lt;% trans %&gt; tag (getting strings in templates). The setup of all this is not obvious, so I&#39;ll put the steps in this blog post. Let&#39;s start!</p>
<ol>
<li><p>Intall Babel: <a href="http://babel.edgewall.org/">http://babel.edgewall.org/</a></p>
<p> You need to install it, not just ref from the application, as you&#39;ll need its comman &#39;pybabel&#39; to generate locale-specific files. I use Windows, so I just downloaded the installation package.</p>
<p> Make sure that Python folders are in your PATH variable. I use Python 2.7, so to make Babel work I&#39;ll need the following values in PATH: &quot;C:\Python27;C:\Python27\Scripts&quot;. Scripts folder contains the pybabel executable.</p>
</li>
<li><p>Install jinja2: <a href="http://jinja.pocoo.org/">http://jinja.pocoo.org</a>
Once again, you need to install it, as Babel will need it to parse strings in templates. Just run</p>
<pre><code> easy_install Jinja2</code></pre></li>
<li><p>Put Babel and <a href="http://pypi.python.org/pypi/gaepytz">gaepytz</a> libraries inside your GAE application. They are required for i18n module.</p>
</li>
<li><p>Configure jinja2 to be used in your application. You&#39;ll need the following entry in app.yaml:</p>
<pre><code> libraries:
 - name: jinja2
   version: &quot;2.6&quot;</code></pre><p> and your webhandler.py will look something similar to this:</p>
<pre><code> import webapp2
 from webapp2_extras import jinja2
 from webapp2_extras import i18n
 from google.appengine.ext.webapp.util import run_wsgi_app

 class MainHandler(webapp2.RequestHandler):
     @webapp2.cached_property
     def jinja2(self):
         return jinja2.get_jinja2(app=self.app)

     def get(self):
         i18n.get_i18n().set_locale(&#39;ru_RU&#39;) # sample locale assigned
         ... # your web site functionality goes here

 # jinja2 config with i18n enabled
 config = {&#39;webapp2_extras.jinja2&#39;: {
              &#39;template_path&#39;: &#39;templates&#39;,
              &#39;environment_args&#39;: { &#39;extensions&#39;: [&#39;jinja2.ext.i18n&#39;] }
            }
           }
 application = webapp2.WSGIApplication([(&#39;.*&#39;, MainHandler)], config=config)

 def main():
     run_wsgi_app(application)

 if __name__ == &quot;__main__&quot;:
     main()</code></pre><p> This code will work if you put your jinja2 templates into &quot;templates&quot; folder.</p>
</li>
<li><p>Create the translations markup. This means, you define the translatable strings in python code with a commonly used &#39;_&#39; alias:</p>
<pre><code> from webapp2_extras.i18n import gettext as _

 def do_some_text():
     return _(&#39;some text&#39;)</code></pre><p> or in jijna2 template with {% trans %} block:</p>
<pre><code> {% block buttons %}
 &lt;div&gt;    
     &lt;div onclick=&quot;window.print()&quot;&gt;{% trans %}Print{% endtrans %}&lt;/div&gt;
 &lt;/div&gt;
 {% endblock %}</code></pre></li>
<li><p>Create a Babel configuration file babel.cfg (put it into the application folder for now):</p>
<pre><code> [jinja2: **/templates/**.html]
 encoding = utf-8
 [python: source/*.py]
 [extractors] 
 jinja2 = jinja2.ext:babel_extract</code></pre><p> This file instructs Babel to extract translatable strings from html jinja2 templates in &quot;templates&quot; folder and python files in &quot;source&quot; folder. </p>
</li>
<li><p>Now it&#39;s time to create translations. First, add a &quot;locale&quot; folder in application root. Still being in root folder, run the following pybabel command to extract the translatable strings from the code</p>
<pre><code> pybabel extract -F ./babel.cfg -o ./locale/messages.pot ./</code></pre><p> then initialize the locales with </p>
<pre><code> pybabel init -l en_US -d ./locale -i ./locale/messages.pot
 pybabel init -l ru_RU -d ./locale -i ./locale/messages.pot</code></pre><p> Now open locale\ru_RU\LC_MESSAGES\messages.po file in your favorite text editor, and produce the translations (you have to change &#39;msgstr&#39; only):</p>
<pre><code> #: templates/sample.html:10
 msgid &quot;Print&quot;
 msgstr &quot;Печать&quot;
 #: source/test.py:13
 msgid &quot;some text&quot;
 msgstr &quot;немного текста&quot;</code></pre><p> And finally compile the texts with</p>
<pre><code> pybabel compile -f -d ./locale</code></pre></li>
<li><p>Every time you need to add more strings, you should do the same steps as in 6, but use &quot;update&quot; instead of &quot;init&quot;:</p>
<pre><code> pybabel update -l en_US -d ./locale -i ./locale/messages.pot
 pybabel update -l ru_RU -d ./locale -i ./locale/messages.pot</code></pre></li>
</ol>
<p>Done! You should be able to run the application and see the strings translated.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/appengine/'>AppEngine</a>, <a href='/tags/i18n/'>i18n</a>, <a href='/tags/jinja2/'>jinja2</a>, <a href='/tags/python/'>Python</a>, <a href='/tags/translations/'>Translations</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Jun 21st, 2012</div>
    
    <h1><a href='/2012/06/21/model-thinking-class-at-coursera/'>Model Thinking class at Coursera</a></h1>
    

    

    <div class="post-content">
        <p>I&#39;ve recently received a statement of accomplishment document for <a href="https://www.coursera.org/" title="Coursera">Coursera</a>&#39;s online <a href="https://www.coursera.org/course/modelthinking" title="Model Thinking Class">Model Thinking Class</a> that I took in April-May this year.</p>
<p><img src="/2012/06/21/model-thinking-class-at-coursera//modelthinking.jpg" alt="Model Thinking" title="Model Thinking"></p>
<p>The course was kind of short but very intense, with a broad variety of models reviewed and many many very cool examples of models applied to real-world processes like population segregation, economic growth, disease spread, auctions and sport results. Scott E Page is a cool teacher who knows how to explain things in simple words and speaks very fast :)</p>
<p>Thanks to Scott E and University of Michigan. Sign up for more courses coming at <a href="/2012/06/21/model-thinking-class-at-coursera/Coursera" title="Coursera">Coursera</a>!</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/coursera/'>Coursera</a>, <a href='/tags/model-thinking/'>Model Thinking</a>, <a href='/tags/online-classes/'>Online Classes</a>, <a href='/tags/online-learning/'>Online Learning</a>, <a href='/tags/statement-of-accomplishment/'>Statement of Accomplishment</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">May 17th, 2012</div>
    
    <h1><a href='/2012/05/17/api-to-get-the-list-of-hotels/'>API to get the list of hotels</a></h1>
    

    

    <div class="post-content">
        <p>In our travelling application, we need to show the list of hotels in a city (St. Petersburg, Russia at the moment, but more will be needed in the future). The idea was to find a hotel information provider, and then upload the complete list into our own database. The following info is needed for each hotel:</p>
<ul>
<li>Name in English</li>
<li>Location (latitude / longitude)</li>
<li>An image would be nice</li>
<li>Probably, some sort of rating
We started with <a href="http://www.booking.com/index.html?aid=352212" title="Booking.com">Booking.com</a>, which does have API, but the API is NOT public, and one has to provide website/bank account information to become an affiliate and get the access.</li>
</ul>
<p>Then, I had a try with <a href="http://GeoNames.org" title="GeoNames.org">GeoNames.org</a>, which I once used for the list of populated localities in Europe. Unfortunately, the POI list in Russia is quite poor there.</p>
<p>We had next try with <a href="http://www.openstreetmap.org" title="OpenStreetMap">OpenStreetMap</a> data. I&#39;ve downloaded a 7 GB XML file with POIs of Russia. But I got disappointed once again after parsing it: only about 100 hotels in St. Petersburg + most names are in Russian.</p>
<p>Finally, we&#39;ve found the solution. <a href="http://www.hotelscombined.com/?a_aid=61901" title="HotelsCombined">HotelsCombined</a> has an easy-to-access and useful service to download the data feed files with hotels. 590 hotels in St. Petersburg - good enough! Here is how you get it:</p>
<ol>
<li>Go to <a href="http://www.hotelscombined.com/Affiliates.aspx">http://www.hotelscombined.com/Affiliates.aspx</a></li>
<li>Register there (no company or bank data is needed)</li>
<li>Open &quot;Data feeds&quot; page</li>
<li>Choose &quot;Standard data feed&quot; -&gt; &quot;Single file&quot; -&gt; &quot;CSV format&quot; (you may get XML as well)</li>
</ol>
<p>Parsing the CSV file is a piece of cake, here is a sample Python code to filter out hotels from St. Petersburg:</p>
<pre><code>def filter_hotels(from_file):
    with open(from_file, &#39;r&#39;) as fr:
        while True:
            line = fr.readline()
            if len(line) == 0:
                break # EOF
            hotel = line.split(&#39;,&#39;)
            city_code = hotel[5]
            country_code = hotel[10]
            if city_code == &#39;St_Petersburg&#39; and country_code == &#39;RU&#39;:
                hotel_name = hotel[2]
                print hotel_name</code></pre><p>Here is the complete list of fields in CSV/XML:</p>
<pre><code>hotelId, hotelFileName, hotelName, rating, cityId, cityFileName, cityName, stateId, stateFileName, stateName, countryCode, countryFileName, countryName, imageId, address, minRate, currencyCode, Latitude, Longitude, NumberOfReviews, ConsumerRating, PropertyType, ChainID, Facilities</code></pre><p><strong>Update:</strong> Unfortunately, HotelsCombined.com has introduced the new regulations: they&#39;ve restricted the access to data feeds by default. To get the access, a partner must submit some information on why one needs the data. The HC team will review it and then (maybe) will grant access. Sad but true. I&#39;m in the middle of getting through this guarg, I&#39;ll let you know about the result.</p>
<p><strong>Update 2:</strong> Yes, we got the access to data feeds again. After reviewing the application form, HotelsCombined asked us to let them know our IP, white-listed it and now we can download the files. Still, I don&#39;t know why they need all this procedure at all.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/hotels-api/'>Hotels API</a>, <a href='/tags/hotelscombined/'>HotelsCombined</a>, <a href='/tags/public-api/'>Public API</a>, <a href='/tags/python/'>Python</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">May 16th, 2012</div>
    
    <h1><a href='/2012/05/16/books-that-ive-recently-read-part-2/'>Books that I’ve recently read, part 2</a></h1>
    

    

    <div class="post-content">
        <p><img src="/2012/05/16/books-that-ive-recently-read-part-2//rework3.jpg" alt="Rework" title="rework"><strong>&quot;Rework&quot;</strong> by Jason Fried and David Heinemeier Hansson (<a href="http://www.amazon.com/Rework-Jason-Fried/dp/0307463745" title="Rework book">link</a>)</p>
<p>Short but practical and inspiring  entrepreneurial handbook for the twenty-first century. The guys from <a href="http://37signals.com/" title="37 signals">37signals</a> give no boring theory but dozens of useful hints for a business &quot;starter&quot;.</p>
<p>The book is not deap, just a &#39;one-evening-reading&#39;. And the advice they give is quite the opposite to what people teach in business schools.</p>
<p>Great reading for those who want to start their own business, have their own business, or are just interested in the subject. But don&#39;t believe them blind. Score is 4 of 5.</p>
<p><img src="/2012/05/16/books-that-ive-recently-read-part-2//krug.png" alt="Krug" title="krug"></p>
<p><strong>&quot;Don&#39;t Make Me Think&quot;</strong> by Steve Krug (<a href="http://www.amazon.com/exec/obidos/ASIN/0789723107" title="Don">link</a>)</p>
<p>A very well laid introduction into web site usability. Steve gives several generic rules (&quot;the Krug&#39;s laws&quot;) on how to get into user&#39;s head, how to think usability, how to make pages clear, understandable and consise. Also be ready to good humor and excellent illustrations.</p>
<p>This book may seem old (first published in 2000) but the rules are still up-to-date, and the book became an industry standard. Must-read for software developers, product managers and everyone who&#39;s job is related to web site creation.</p>
<p>Score is 5.</p>
<p><img src="/2012/05/16/books-that-ive-recently-read-part-2//nondesigner.jpg" alt="Non-designer" title="Non-designer"> <strong>&quot;The Non-Designer&#39;s Design Book&quot;</strong> by Robin Williams (<a href="http://www.amazon.com/exec/obidos/ASIN/0321193857" title="The Non-Designer">link</a>)</p>
<p>I&#39;m far from being a good designer but I&#39;d really love to get at least the very basics of the skill to make beautiful things (UI mostly).</p>
<p>The author of this book explains some really generic principles of design, i.e. contrast, repetition, alignment, proximity and proper font usage. She gives the clear overview of each principle and provides examples and exercises to illustrate them.</p>
<p>We&#39;ll see whether the book will help me build good-looking web pages... In any case, it&#39;s absolutely worth reading for persons who have interest in the subject.</p>
<p><img src="/2012/05/16/books-that-ive-recently-read-part-2//toiletpaperentrepreneur.jpg" alt="" title="toiletpaperentrepreneur"> <strong>&quot;The Toilet Paper Entrepreneur&quot;</strong> by Mike Michaliwicz (<a href="http://www.toiletpaperentrepreneur.com/book/overview/" title="The Toilet paper entrepreneur">link</a>)</p>
<p>The book is about running a startup without any significant budget available.</p>
<p>To me, this book is mostly about motivation and call to action. Stop crying about not having this or that. Don&#39;t wait for a million to come before you start your business. Just start today and work hard!</p>
<p>Otherwise, I don&#39;t think I&#39;ll take much of Mike&#39;s advice. Score is 3 of 5.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/books/'>Books</a>, <a href='/tags/business-books/'>Business books</a>
    </div>
    
</article>


<div class="page-nav">
    
    <a class="page-nav-newer" href="/15/index.html">&lt;&lt; Previous page</a>
    
    
    <a class="page-nav-older" href="/17/index.html">Next page &gt;&gt;</span></a>
    
</div>

<div id="me">
    <p itemscope itemtype="http://data-vocabulary.org/Person">
        <img src="/images/Headshot-Square.jpg" alt="Mikhail Shilkov" itemprop="photo" />
        I'm <b><span itemprop="name">Mikhail Shilkov</span></b>, a <span itemprop="title">software developer</span>. I enjoy F#, C#, Javascript and SQL development, reasoning about distributed systems, data processing pipelines, cloud and web apps. I blog about my experience on this website.
    </p>
    <p>
        <a href="https://www.linkedin.com/in/mikhailshilkov/">LinkedIn</a> &#8226;
        <a href="https://twitter.com/mikhailshilkov">@mikhailshilkov</a> &#8226;
        <a href="https://github.com/mikhailshilkov">GitHub</a> &#8226;
        <a href="https://stackoverflow.com/users/1171619/mikhail">Stack Overflow</a>
    </p>
</div>
</div>
<div class="container">
    <div class="navbar navbar-footer">
        <p class="navbar-center navbar-text">Content copyright &copy; 2018 Mikhail Shilkov</p>
    </div>
</div>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
<script src="/vendor/prism.js"></script>
<script src="/site.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59218480-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>