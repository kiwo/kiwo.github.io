<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <meta name="description" content="Software development using .NET, C#, SQL, Javascript and related technologies" />

    <title>Mikhail Shilkov</title>
    <meta name="author" content="Mikhail Shilkov">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="twitter:card" content="summary_large_image"></meta>
    <meta name="twitter:creator" content="@MikhailShilkov"></meta>
    <meta name="twitter:title" content="Mikhail Shilkov"></meta>

    <meta property="og:type" content="article" />
    <meta property="og:title" content="Mikhail Shilkov" />
    <meta property="og:url" content="https://mikhail.io/16/index.html" />




    <link href="/feed/" rel="alternate" title="mikhail.io" type="application/atom+xml">
    <link href="/favicon.ico?v=2" rel="shortcut icon">

    <!-- Bootstrap -->
    <link href="/vendor/prism.css" rel="stylesheet" media="screen">
    <link href="/styles/site.css" rel="stylesheet" media="screen">

    <meta name="generator" content="DocPad v6.80.6" />
    
</head>
<body>

<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <span class="text-primary">Mikhail Shilkov</span><br />
                <span class="elevator-pitch">Serverless, Azure, FP, F# and more</span>
            </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <!--<li><a href="/">Blog</a></li>-->
                
                    <li><a href="/tags/">Topics</a></li>
                
                    <li><a href="/archives/">Archives</a></li>
                
                    <li><a href="/talks/">Talks</a></li>
                
                    <li><a href="/about/">About</a></li>
                
                <li class="hidden-xs">
                    <a href="/feed/" class="rss"><span class="icon icon-feed"></span></a>
                    <a href="https://www.linkedin.com/in/mikhailshilkov" class="linkedin"><span class="icon icon-linkedin"></span></a>
                    <a href="https://twitter.com/mikhailshilkov" class="twitter"><span class="icon icon-twitter"></span></a>
                    <a href="https://github.com/mikhailshilkov" class="github"><span class="icon icon-github"></span></a>
                </li>
            </ul>
            <form class="navbar-form navbar-right hidden-xs" role="search" action="https://google.com/search"
                  method="get">
                <div class="form-group">
                    <input type="search" name="q" class="form-control" placeholder="Search">
                    <input type="hidden" name="q" value="site:mikhail.io">
                </div>
            </form>
        </div>
    </div>
</div>
<div class="container">
    
    <article class="post">
    <div class="post-date">Nov 1st, 2012</div>
    
    <h1><a href='/2012/11/01/finance-class-at-coursera/'>Introduction to Finance class at Coursera</a></h1>
    

    

    <div class="post-content">
        <p>I&#39;ve recently received a statement of accomplishment document for <a href="https://www.coursera.org/" title="Coursera">Coursera</a>&#39;s online <a href="https://www.coursera.org/course/introfinance" title="Introduction to Finance class">Introduction to Finance class</a> that I took in July-September this year.</p>
<p><img src="/2012/11/01/finance-class-at-coursera//finance.jpg" alt="Finance"></p>
<p>The course was lead by prof. Gautam Kaul from University of Michigan. The level of lectures was really introductory, the pace was very slow (too slow for me, even watching x1.5 speed). You could learn about basic finance principles like time value of money, calculating cash flows and discounted values, about stocks and bonds, and risk/return relations.</p>
<p>I liked a lot the assignment tests, which were much stronger and solid then the examples in lectures. They were challenging most of the time, so I&#39;m glad I managed to get 100% score in the end :)</p>
<p>Recommended for anyone who has no idea about what finance is about, but not for experienced students.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/coursera/'>Coursera</a>, <a href='/tags/finance/'>finance</a>, <a href='/tags/online-classes/'>Online Classes</a>, <a href='/tags/online-learning/'>Online Learning</a>, <a href='/tags/statement-of-accomplishment/'>Statement of Accomplishment</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Oct 29th, 2012</div>
    
    <h1><a href='/2012/10/29/gamification-class-at-coursera/'>Gamification class at Coursera</a></h1>
    

    

    <div class="post-content">
        <p>I&#39;ve recently received a statement of accomplishment document for <a href="https://www.coursera.org/" title="Coursera">Coursera</a>&#39;s online <a href="https://www.coursera.org/course/gamification" title="Gamification class">Gamification class</a> that I took in August-October this year.</p>
<p><img src="/2012/10/29/gamification-class-at-coursera//gamification.jpg" alt="Gamification certificate" title="Gamification certificate"></p>
<p>The course was lead by prof. Kevin Werbach from The Wharton School, University of Pennsylvania. He told us about applying game techniques to non-game world problems: business, social etc. In essence, it&#39;s on how to add FUN to processes, that are not supposed to be fun at all. Which is really cool. I loved both informative and well-producted lectures, and peer-reviewed assignments that appeared to be... fun :)</p>
<p>Want to know why Stackoverflow and Foursquare are such a success? Come join this course next time!</p>
<p>I hope I&#39;ll have a chance to apply the ideas from the course in real life!</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/coursera/'>Coursera</a>, <a href='/tags/gamification/'>gamification</a>, <a href='/tags/online-classes/'>Online Classes</a>, <a href='/tags/online-learning/'>Online Learning</a>, <a href='/tags/statement-of-accomplishment/'>Statement of Accomplishment</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Sep 2nd, 2012</div>
    
    <h1><a href='/2012/09/02/use-fiddler-to-debug-urlfetch-requests-in-google-appengine/'>Use Fiddler to debug urlfetch requests in Google AppEngine</a></h1>
    

    

    <div class="post-content">
        <p>In <a href="http://www.tripbenefit.com" title="TripBenefit.com - travel in St. Petersburg, Russia">TripBenefit</a> application, we use a lot of web crawling to get data from third-party websites. As the application works on top of Google AppEngine, the <a href="https://developers.google.com/appengine/docs/python/urlfetch/fetchfunction?hl=ru" title="urlfetch.fetch() docs">urlfetch.fetch()</a> function is used to send HTTP requests and get responses.</p>
<p>Some crawling is not as easy as just a simple GET request, so we have to send specific POST data, cookies and HTTP headers. And all this needs to be debugged. <a href="http://www.fiddler2.com" title="Fiddler2 web debugging tool">Fiddler2</a> is the gold standard for web debugging tools, so I&#39;d like to use it in this case too. I.e. I want to see urlfetch requests displayed in Fiddler, while I&#39;m on development env.**
**</p>
<p>However, to make it work, I have to make AppEngine run all fetch requests through the Fiddler&#39;s proxy: localhost:8888. As proxies aren&#39;t supported within Google production environment, it&#39;s not supported by development engine either. There&#39;s simply no such &#39;proxy&#39; parameter in urlfetch!</p>
<p>It seems that the only way to overcome this limitation is to modify the code of AppEngine development server. It isn&#39;t that tricky as it sounds! :)</p>
<p>Stop all your developmenet AppEngine instances. Go to your AppEngine folder, and then to \google\appengine\api. Edit urlfetch_stub.py (make a backup beforehand). Search for &quot;connection =&quot; line, something like</p>
<pre><code>if _CONNECTION_SUPPORTS_TIMEOUT:
  connection = connection_class(host, timeout=deadline)
else:
  connection = connection_class(host)</code></pre><p>Substitute it with </p>
<pre><code>connection = connection_class(&#39;127.0.0.1&#39;, 8888)</code></pre><p>Then, search for &quot;connection.request&quot; method call similar to</p>
<pre><code>connection.request(method, full_path, payload, adjusted_headers)</code></pre><p>and insert another line before it:</p>
<pre><code>full_path = protocol + &quot;://&quot; + host + full_path</code></pre><p>Done! After you run the dev server and Fiddler2, you should be able to see urlfetch requests in web debugger. Have a nice debugging session!</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/appengine/'>AppEngine</a>, <a href='/tags/debugging/'>Debugging</a>, <a href='/tags/fiddler/'>Fiddler</a>, <a href='/tags/google-appengine/'>Google AppEngine</a>, <a href='/tags/python/'>Python</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Aug 14th, 2012</div>
    
    <h1><a href='/2012/08/14/google-adds-public-transit-into-api/'>Google adds Public Transit into API</a></h1>
    

    

    <div class="post-content">
        <p>Now, both Google Directions Web Services and Google Maps JavaScript API include building the routes with Public Transit.</p>
<p>Blog post:</p>
<p><a href="http://googlegeodevelopers.blogspot.com/2012/06/public-transit-routing-and-layer-now.html">http://googlegeodevelopers.blogspot.com/2012/06/public-transit-routing-and-layer-now.html</a></p>
<p>API docs:</p>
<p><a href="https://developers.google.com/maps/documentation/directions/#TravelModes">https://developers.google.com/maps/documentation/directions/#TravelModes</a></p>
<p><a href="https://developers.google.com/maps/documentation/javascript/directions#TransitOptions">https://developers.google.com/maps/documentation/javascript/directions#TransitOptions</a></p>
<p>Sample request in St. Petersburg:</p>
<p><a href="http://maps.googleapis.com/maps/api/directions/json?origin=59.94473,30.294254&amp;destination=59.80612,30.308552&amp;sensor=false&amp;departure_time=1346197500&amp;mode=transit">http://maps.googleapis.com/maps/api/directions/json?origin=59.94473,30.294254&amp;destination=59.80612,30.308552&amp;sensor=false&amp;departure_time=1346197500&amp;mode=transit</a></p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/google-maps/'>Google Maps</a>, <a href='/tags/google-transit/'>Google Transit</a>
    </div>
    
</article>

    <article class="post">
    <div class="post-date">Jul 26th, 2012</div>
    
    <h1><a href='/2012/07/26/enable-jinja2-and-i18n-translations-on-google-appengine/'>Enable jinja2 and i18n translations on Google AppEngine</a></h1>
    

    

    <div class="post-content">
        <p>My initial goal was to make our new application (based on python/AppEngine) translatable. This means the following requirements:</p>
<ol>
<li>All strings in the application must be translatable</li>
<li>Translations should preferably stored in separate files</li>
<li>It should be easy to use the translations both in .py files and html templates</li>
</ol>
<p>The solution that I came to after a couple of hours includes the following components: Babel (string file generation), i18n.gettext (getting strings in code) and jinja2 &lt;% trans %&gt; tag (getting strings in templates). The setup of all this is not obvious, so I&#39;ll put the steps in this blog post. Let&#39;s start!</p>
<ol>
<li><p>Intall Babel: <a href="http://babel.edgewall.org/">http://babel.edgewall.org/</a></p>
<p> You need to install it, not just ref from the application, as you&#39;ll need its comman &#39;pybabel&#39; to generate locale-specific files. I use Windows, so I just downloaded the installation package.</p>
<p> Make sure that Python folders are in your PATH variable. I use Python 2.7, so to make Babel work I&#39;ll need the following values in PATH: &quot;C:\Python27;C:\Python27\Scripts&quot;. Scripts folder contains the pybabel executable.</p>
</li>
<li><p>Install jinja2: <a href="http://jinja.pocoo.org/">http://jinja.pocoo.org</a>
Once again, you need to install it, as Babel will need it to parse strings in templates. Just run</p>
<pre><code> easy_install Jinja2</code></pre></li>
<li><p>Put Babel and <a href="http://pypi.python.org/pypi/gaepytz">gaepytz</a> libraries inside your GAE application. They are required for i18n module.</p>
</li>
<li><p>Configure jinja2 to be used in your application. You&#39;ll need the following entry in app.yaml:</p>
<pre><code> libraries:
 - name: jinja2
   version: &quot;2.6&quot;</code></pre><p> and your webhandler.py will look something similar to this:</p>
<pre><code> import webapp2
 from webapp2_extras import jinja2
 from webapp2_extras import i18n
 from google.appengine.ext.webapp.util import run_wsgi_app

 class MainHandler(webapp2.RequestHandler):
     @webapp2.cached_property
     def jinja2(self):
         return jinja2.get_jinja2(app=self.app)

     def get(self):
         i18n.get_i18n().set_locale(&#39;ru_RU&#39;) # sample locale assigned
         ... # your web site functionality goes here

 # jinja2 config with i18n enabled
 config = {&#39;webapp2_extras.jinja2&#39;: {
              &#39;template_path&#39;: &#39;templates&#39;,
              &#39;environment_args&#39;: { &#39;extensions&#39;: [&#39;jinja2.ext.i18n&#39;] }
            }
           }
 application = webapp2.WSGIApplication([(&#39;.*&#39;, MainHandler)], config=config)

 def main():
     run_wsgi_app(application)

 if __name__ == &quot;__main__&quot;:
     main()</code></pre><p> This code will work if you put your jinja2 templates into &quot;templates&quot; folder.</p>
</li>
<li><p>Create the translations markup. This means, you define the translatable strings in python code with a commonly used &#39;_&#39; alias:</p>
<pre><code> from webapp2_extras.i18n import gettext as _

 def do_some_text():
     return _(&#39;some text&#39;)</code></pre><p> or in jijna2 template with {% trans %} block:</p>
<pre><code> {% block buttons %}
 &lt;div&gt;    
     &lt;div onclick=&quot;window.print()&quot;&gt;{% trans %}Print{% endtrans %}&lt;/div&gt;
 &lt;/div&gt;
 {% endblock %}</code></pre></li>
<li><p>Create a Babel configuration file babel.cfg (put it into the application folder for now):</p>
<pre><code> [jinja2: **/templates/**.html]
 encoding = utf-8
 [python: source/*.py]
 [extractors] 
 jinja2 = jinja2.ext:babel_extract</code></pre><p> This file instructs Babel to extract translatable strings from html jinja2 templates in &quot;templates&quot; folder and python files in &quot;source&quot; folder. </p>
</li>
<li><p>Now it&#39;s time to create translations. First, add a &quot;locale&quot; folder in application root. Still being in root folder, run the following pybabel command to extract the translatable strings from the code</p>
<pre><code> pybabel extract -F ./babel.cfg -o ./locale/messages.pot ./</code></pre><p> then initialize the locales with </p>
<pre><code> pybabel init -l en_US -d ./locale -i ./locale/messages.pot
 pybabel init -l ru_RU -d ./locale -i ./locale/messages.pot</code></pre><p> Now open locale\ru_RU\LC_MESSAGES\messages.po file in your favorite text editor, and produce the translations (you have to change &#39;msgstr&#39; only):</p>
<pre><code> #: templates/sample.html:10
 msgid &quot;Print&quot;
 msgstr &quot;Печать&quot;
 #: source/test.py:13
 msgid &quot;some text&quot;
 msgstr &quot;немного текста&quot;</code></pre><p> And finally compile the texts with</p>
<pre><code> pybabel compile -f -d ./locale</code></pre></li>
<li><p>Every time you need to add more strings, you should do the same steps as in 6, but use &quot;update&quot; instead of &quot;init&quot;:</p>
<pre><code> pybabel update -l en_US -d ./locale -i ./locale/messages.pot
 pybabel update -l ru_RU -d ./locale -i ./locale/messages.pot</code></pre></li>
</ol>
<p>Done! You should be able to run the application and see the strings translated.</p>

    </div>

    

    
    <div class="post-tags">
        Posted In: <a href='/tags/appengine/'>AppEngine</a>, <a href='/tags/i18n/'>i18n</a>, <a href='/tags/jinja2/'>jinja2</a>, <a href='/tags/python/'>Python</a>, <a href='/tags/translations/'>Translations</a>
    </div>
    
</article>


<div class="page-nav">
    
    <a class="page-nav-newer" href="/15/index.html">&lt;&lt; Previous page</a>
    
    
    <a class="page-nav-older" href="/17/index.html">Next page &gt;&gt;</span></a>
    
</div>

<div id="me">
    <p itemscope itemtype="http://data-vocabulary.org/Person">
        <img src="/images/Headshot-Square.jpg" alt="Mikhail Shilkov" itemprop="photo" />
        I'm <b><span itemprop="name">Mikhail Shilkov</span></b>, a <span itemprop="title">software developer and architect</span>,
        a Microsoft Azure MVP, Russian expat living in the Netherlands. I am passionate about cloud technologies, 
        functional programming and the intersection of the two.
    </p>
    <p>
        <a href="https://www.linkedin.com/in/mikhailshilkov/">LinkedIn</a> &#8226;
        <a href="https://twitter.com/mikhailshilkov">@mikhailshilkov</a> &#8226;
        <a href="https://github.com/mikhailshilkov">GitHub</a> &#8226;
        <a href="https://stackoverflow.com/users/1171619/mikhail">Stack Overflow</a>
    </p>
</div>
</div>
<div class="container">
    <div class="navbar navbar-footer">
        <p class="navbar-center navbar-text">Content copyright &copy; 2018 Mikhail Shilkov</p>
    </div>
</div>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
<script src="/vendor/prism.js"></script>
<script src="/site.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59218480-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>