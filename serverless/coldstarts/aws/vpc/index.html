<!DOCTYPE html>
<html lang="en-us" prefix="og: http://ogp.me/ns#"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<link rel="icon" type="image/png" href="/favicon.ico">
	
	
	<title>Cold Start Duration of VPC-connected AWS Lambda | Mikhail Shilkov</title>
	
	
	
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	
	<link rel="stylesheet" href="/sass/main.css">
	
	<meta property="og:title" content="Cold Start Duration of VPC-connected AWS Lambda" />
	<meta property="og:description" content="AWS Lambda might need to access resources inside Amazon Virtual Private Cloud (Amazon VPC). Configuring VPC access will slow down the cold starts.
The following charts shows the cold start duration distribution of an &ldquo;Hello World&rdquo; JavaScript Lambda with VPC connectivity enabled:" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://mikhail.io/serverless/coldstarts/aws/vpc/" />

	
	
	
	
	<meta property="og:image" content="https://mikhail.io/serverless/coldstarts/aws/vpc/vpc_chart_thumb.png" />
	
	


	
	
	<meta property="article:tag" content="Cold Starts" />
	
	<meta property="article:tag" content="AWS" />
	
	<meta property="article:tag" content="JavaScript" />
	
	<meta property="article:tag" content="VPC" />
	
	<meta property="article:tag" content="AWS Lambda" />
	

	
	
	<meta name="twitter:card" content="summary_large_image"/>
	
	<meta name="twitter:image" content="https://mikhail.io/serverless/coldstarts/aws/vpc/vpc_chart_thumb.png" />
	
	

	<meta name="twitter:title" content="Cold Start Duration of VPC-connected AWS Lambda"/>
	<meta name="twitter:description" content="AWS Lambda might need to access resources inside Amazon Virtual Private Cloud (Amazon VPC). Configuring VPC access will slow down the cold starts.
The following charts shows the cold start duration distribution of an &ldquo;Hello World&rdquo; JavaScript Lambda with VPC connectivity enabled:"/>
	<meta name="twitter:creator" content="@MikhailShilkov"></meta>
</head>
<body><script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load("current", {packages:["corechart"]});
    function addChart(make) {
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            const data = new google.visualization.DataTable();

            const options = {
                height: 420,  
                chartArea: { width: '85%', height: '70%' },
                legend: 'none',
                hAxis: { minValue: 0 },
                vAxis: {},
                series: {      
                    0: { tooltip : false}
                }
            };
            const chart = make(data, options);
            options.hAxis.textStyle = options.hAxis.titleTextStyle 
                = options.vAxis.textStyle = options.vAxis.titleTextStyle = { fontName: 'Merriweather' };

            chart.draw(data, options);
        }
    }
</script>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container pr-0">
        <a class="navbar-brand" href="/">
            <img class="author-thumb" src="/images/author.jpg" alt="Mikhail Shilkov">
            <span class="text-primary">Mikhail Shilkov</span>
        </a>

        
               


        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">TOPICS</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/archives/">ARCHIVES</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/talks/">TALKS</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">ABOUT</a>
                </li>
                <li class="nav-item">
    <a class="nav-link" href="https://mikhail.io/feed/"><i class="fas fa-rss social-icon" aria-hidden="true"></i></a>
</li>

<li class="nav-item">
    <a class="nav-link" href="https://www.twitter.com/MikhailShilkov"><i class="fab fa-twitter social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://medium.com/@MikhailShilkov"><i class="fab fa-medium social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://github.com/MikhailShilkov"><i class="fab fa-github social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/MikhailShilkov"><i class="fab fa-linkedin social-icon" aria-hidden="true"></i></a>
</li>

</ul>
        </div>
        
    </div>
</nav>


        <div class="container">

    <div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-lg-2 pl-0"><div class="share">
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Cold%20Start%20Duration%20of%20VPC-connected%20AWS%20Lambda%20by%20@MikhailShilkov&url=https%3a%2f%2fmikhail.io%2fserverless%2fcoldstarts%2faws%2fvpc%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fmikhail.io%2fserverless%2fcoldstarts%2faws%2fvpc%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>        
    </ul>

    
</div></div>
                                
                <div class="col-lg-9 flex-first flex-lg-unordered">

                    <div class="mainheading">
                        
                        <h1 class="posttitle">Cold Start Duration of VPC-connected AWS Lambda</h1> 
                        	
                        <div class="post-top-meta">
                            <div>
                            
                            <span class="post-date">Last updated on Feb 24, 2019
                            
                            &nbsp;&middot;&nbsp; 1 min read</span></span>
                            </div>
                        </div>			
                    </div>
                
                    
                                        
                
                    
                    <div class="article-post">
                        <p>AWS Lambda might need to access resources inside Amazon Virtual Private Cloud (Amazon VPC). Configuring VPC access will slow down the cold starts.</p>

<p>The following charts shows the cold start duration distribution of an &ldquo;Hello World&rdquo; JavaScript Lambda with VPC connectivity enabled:</p>






<script type="text/javascript">
addChart((data, options) => {
  data.addColumn('number', 'Duration (sec)');
  data.addRows([[0.21353821333333328],[10.744075513333334],[8.813128613333333],[0.2029506133333333],[0.22343741333333328],[0.18571791333333332],[7.798389013333333],[0.3239759133333333],[7.818810513333332],[9.175005113333333],[0.2654417133333333],[7.271422113333332],[9.957315513333333],[7.7424538133333325],[7.7609429133333325],[7.775987413333333],[8.248677713333333],[0.2835274133333333],[10.326556213333333],[0.22318421333333333],[8.876460213333333],[0.2631247133333333],[7.224021013333332],[0.21775571333333332],[8.857749413333334],[0.2851774133333333],[0.24535191333333328],[0.1749246133333333],[0.2467097133333333],[0.21728861333333332],[9.065708913333333],[0.2963187133333333],[0.2692502133333333],[4.618651413333333],[7.751489513333333],[8.168147813333334],[8.747575713333333],[8.596775613333334],[10.263929413333333],[8.373105413333333],[8.379381613333333],[8.678910013333333],[14.635594713333333],[8.718727413333333],[7.694395713333333],[9.233696713333334],[0.1747412133333333],[7.708505313333332],[0.1479772133333333],[8.731533913333333],[8.768385113333334],[0.20813041333333332],[0.18805761333333332],[0.2420838133333333],[0.2839996133333333],[0.2519206133333333],[0.20643921333333332],[17.197988913333333],[0.2568992133333333],[0.24230681333333332],[7.7337792133333325],[0.1933735133333333],[0.18647701333333327],[14.667403313333333],[0.1611752133333333],[0.20779491333333328],[0.2784090133333333],[0.22090861333333328],[4.101954113333333],[7.806187913333333],[0.2626543133333333],[8.702210113333333],[0.2640482133333333],[9.231320913333333],[8.638210113333333],[0.2441192133333333],[15.641126513333333],[0.4030219133333333],[0.1302324133333333],[7.705023513333333],[0.15921921333333333],[0.2076990133333333],[8.242588013333334],[17.195311613333335]]);

  options.hAxis.maxValue = "1.2";
  options.hAxis.title = 'seconds';
  options.vAxis.ticks = [];
  options.vAxis.title = 'probability';
  options.colors = ['red'];
  options.histogram = {
    hideBucketItems: true,
    lastBucketPercentile: 5
  };

  return new google.visualization.Histogram(document.getElementById('chart_div_coldstart_aws_vpc'));
});
</script>
<figure>
  <div id="chart_div_coldstart_aws_vpc"></div>
  <figcaption class="imageCaption"><h4>Cold start durations of VPC-connected AWS Lambda</h4></figcaption>
</figure>

<p>It&rsquo;s interesting that many cold starts are actually fast (the left column). Are they reusing networking infrastructure for multiple Lambda instances?</p>

<p>Here is the comparison of functions with and without VPC connectivity:</p>






<script type="text/javascript">
addChart((data, options) => {
  const points = [["No VPC",0.2918788506666667,0.11813574066666667,0.9692951123333299,0.17510927999999998,0.5428548906666666,"{color: green; fill-color: green}"],["VPC",5.9213362133333325,0.15294243,16.508879860833318,0.20777829066666662,8.90926332133333,"{color: red; fill-color: red}"]];

  data.addColumn('string', 'x');
  data.addColumn('number', 'values');
  
  data.addColumn({id:'i0', type:'number', role:'interval'});
  data.addColumn({id:'i1', type:'number', role:'interval'});
  data.addColumn({id:'i2', type:'number', role:'interval'});
  data.addColumn({id:'i3', type:'number', role:'interval'});
  data.addColumn({ 'type': 'string', 'role': 'style' });
  data.addRows(points);

  options.lineWidth = 0;
  options.intervals = { 'style':'boxes' };
  options.vAxis = {
    title: 'seconds'
  };

  
  return new google.visualization.LineChart(document.getElementById('chart_div_coldstart_aws_byvpc'));
  
});
</script>
<figure>
  <div id="chart_div_coldstart_aws_byvpc"></div>
  <figcaption class="imageCaption"><h4>Comparison of cold start durations of the same Lambda with and without VPC access</h4></figcaption>
</figure>

<p>Go back to <a href="/serverless/coldstarts/aws/">Cold Starts in AWS Lambda</a>.</p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        
                        <a href="/serverless/coldstarts/">Cold Starts</a>
                        
                        </li>
                        
                        <li>
                        
                        <a href="/tags/aws">AWS</a>
                        
                        </li>
                        
                        <li>
                        
                        <a href="/tags/javascript">JavaScript</a>
                        
                        </li>
                        
                        <li>
                        
                        <a href="/tags/vpc">VPC</a>
                        
                        </li>
                        
                        <li>
                        
                        <a href="/tags/aws-lambda">AWS Lambda</a>
                        
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                </div>
                
            </div>
        </div>
        
        
    </div>

        </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright Mikhail Shilkov - All rights reserved
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                
            </div>
        </div>
    </div>
</footer>


    







<script src="/js/bundle.min.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-59218480-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </body>
</html>
