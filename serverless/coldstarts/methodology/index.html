<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<link rel="icon" type="image/png" href="/favicon.ico">
	
	
	<title>Measuring Cold Starts | Mikhail Shilkov</title>
	
	
	
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	
	<link rel="stylesheet" href="/sass/main.css">
	<meta property="og:title" content="Measuring Cold Starts" />
<meta property="og:description" content="We are testing cold starts on cloud functions responding to HTTP requests because that&rsquo;s where the increased latency matters the most.
Each cloud function responds with a simple 200 OK with the following custom response headers:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mikhail.io/serverless/coldstarts/methodology/" />
<meta property="article:published_time" content="2019-02-14T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-02-14T00:00:00&#43;00:00"/>

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Measuring Cold Starts"/>
<meta name="twitter:description" content="We are testing cold starts on cloud functions responding to HTTP requests because that&rsquo;s where the increased latency matters the most.
Each cloud function responds with a simple 200 OK with the following custom response headers:"/>

	<meta name="twitter:creator" content="@MikhailShilkov"></meta>
</head>
<body><script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load("current", {packages:["corechart"]});
    function addChart(make) {
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            const data = new google.visualization.DataTable();

            const options = {
                height: 420,  
                chartArea: { width: '85%', height: '70%' },
                legend: 'none',
                hAxis: { minValue: 0 },
                vAxis: {},
                series: {      
                    0: { tooltip : false}
                }
            };
            const chart = make(data, options);
            options.hAxis.textStyle = options.hAxis.titleTextStyle 
                = options.vAxis.textStyle = options.vAxis.titleTextStyle = { fontName: 'Merriweather' };

            chart.draw(data, options);
        }
    }
</script>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container pr-0">
        <a class="navbar-brand" href="/">
            <img class="author-thumb" src="/images/author.jpg" alt="Mikhail Shilkov">
            <span class="text-primary">Mikhail Shilkov</span>
        </a>

        
               


        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">TOPICS</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/archives/">ARCHIVES</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/talks/">TALKS</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">ABOUT</a>
                </li>
                <li class="nav-item">
    <a class="nav-link" href="https://mikhail.io/feed/"><i class="fas fa-rss social-icon" aria-hidden="true"></i></a>
</li>

<li class="nav-item">
    <a class="nav-link" href="https://www.twitter.com/MikhailShilkov"><i class="fab fa-twitter social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://medium.com/@MikhailShilkov"><i class="fab fa-medium social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://github.com/MikhailShilkov"><i class="fab fa-github social-icon" aria-hidden="true"></i></a>
</li>


<li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/MikhailShilkov"><i class="fab fa-linkedin social-icon" aria-hidden="true"></i></a>
</li>

</ul>
        </div>
        
    </div>
</nav>


        <div class="container">

    <div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-lg-2 pl-0"><div class="share">
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Measuring%20Cold%20Starts%20by%20@MikhailShilkov&url=https%3a%2f%2fmikhail.io%2fserverless%2fcoldstarts%2fmethodology%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fmikhail.io%2fserverless%2fcoldstarts%2fmethodology%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>        
    </ul>

    
</div></div>
                                
                <div class="col-lg-9 flex-first flex-lg-unordered">

                    <div class="mainheading">
                        
                        <h1 class="posttitle">Measuring Cold Starts</h1> 
                        	
                        <div class="post-top-meta">
                            <div>
                            
                            <span class="post-date">Published on Feb 14, 2019
                            
                            &nbsp;&middot;&nbsp; 2 min read</span></span>
                            </div>
                        </div>			
                    </div>
                
                    
                                        
                
                    
                    <div class="article-post">
                        <p>We are testing cold starts on cloud functions responding to HTTP requests because that&rsquo;s where the increased latency matters the most.</p>

<p>Each cloud function responds with a simple <code>200 OK</code> with the following custom response headers:</p>

<ul>
<li><strong>Name</strong>: Function Name which uniquely identifies its scenario, for instance, saying &ldquo;Node.js AWS Lambda with a VPC connection&rdquo;</li>
<li><strong>Memory</strong>: How much memory is provisioned to the function</li>
<li><strong>Instance ID</strong>: A unique identifier of the functions instance that served this request</li>
<li><strong>Count</strong>: The number of requests that this instance already served, including the current one. Count = 1 means the cold start.</li>
</ul>

<p>We do not rely on execution time reported by a cloud provider. Instead, we measure the end-to-end duration from the client perspective. Thus, the delays in the HTTP gateway (e.g., API Gateway in case of AWS) and network latencies are included in the total duration. The cold start duration is then adjusted by the observed warm response time.</p>

<p>Here is what the setup looks like:</p>

<figure>
    <img src="coldstartmeasurerent.png"/> <figcaption>
            <h4>Measuring the cold starts</h4>
        </figcaption>
</figure>


<ol>
<li>There is <em>a scheduler</em> which triggers over random intervals in a given range to see how interval impacts the cold starts.</li>
<li>The scheduler invokes <em>the caller</em>. The caller sends an HTTP request to the cloud function. The request goes through the HTTP front-end of the cloud and reaches the function.</li>
<li>The caller <em>measures</em> the time it takes to get the HTTP response back. That&rsquo;s the key metric for the cold start estimation.</li>
<li>The caller <em>logs</em> the response and the timings to blob storage.</li>
</ol>

<p>Given enough number and variety of requests, statistical estimates can be derived from the measurements. The charts and conclusions are based on these estimates.</p>

<p>Learn the results: <a href="/serverless/coldstarts/big3/">Comparison of Cold Starts across AWS, Azure, and GCP</a>.</p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        
                        <a href="/serverless/coldstarts/">Cold Starts</a>
                        
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                </div>
                
            </div>
        </div>
        
        
    </div>

        </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright Mikhail Shilkov - All rights reserved
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                
            </div>
        </div>
    </div>
</footer>


    






<script src="/js/bundle.min.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-59218480-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </body>
</html>
